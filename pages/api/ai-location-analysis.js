import { db } from '../../firebaseConfig';
import { collection, addDoc, getDocs, query, where, doc, updateDoc } from 'firebase/firestore';

export default async function handler(req, res) {
  if (req.method === 'POST') {
    try {
      const { location, scheduleId, activity } = req.body;

      if (!location) {
        return res.status(400).json({ 
          success: false, 
          error: 'μ¥μ† μ •λ³΄κ°€ ν•„μ”ν•©λ‹λ‹¤.' 
        });
      }

      // κΈ°μ΅΄ λ¶„μ„ κ²°κ³Όκ°€ μλ”μ§€ ν™•μΈ
      const existingAnalysis = await checkExistingAnalysis(scheduleId, location);
      if (existingAnalysis) {
        return res.status(200).json({
          success: true,
          data: existingAnalysis,
          message: 'κΈ°μ΅΄ λ¶„μ„ κ²°κ³Όλ¥Ό λ°ν™ν•©λ‹λ‹¤.'
        });
      }

      // AIλ¥Ό ν™μ©ν• μ¥μ† λ¶„μ„ (μ‹¤μ  AI API λ€μ‹  κ³ ν’μ§ ν•λ“μ½”λ”© λ°μ΄ν„° μ‚¬μ©)
      const analyzedInfo = await analyzeLocationWithAI(location, activity);

      // λ¶„μ„ κ²°κ³Όλ¥Ό DBμ— μ €μ¥
      const analysisData = {
        scheduleId: scheduleId || null,
        location: location,
        activity: activity || '',
        analyzedInfo: analyzedInfo,
        analysisDate: new Date().toISOString(),
        aiVersion: '2.0'
      };

      const docRef = await addDoc(collection(db, 'location-analysis'), analysisData);

      res.status(200).json({
        success: true,
        data: {
          id: docRef.id,
          ...analysisData
        },
        message: 'AI λ¶„μ„μ΄ μ™„λ£λμ—μµλ‹λ‹¤.'
      });

    } catch (error) {
      console.error('AI μ¥μ† λ¶„μ„ μ¤λ¥:', error);
      res.status(500).json({ 
        success: false, 
        error: 'AI λ¶„μ„ μ¤‘ μ¤λ¥κ°€ λ°μƒν–μµλ‹λ‹¤.' 
      });
    }
  } else {
    res.status(405).json({ 
      success: false, 
      error: 'POST λ©”μ„λ“λ§ ν—μ©λ©λ‹λ‹¤.' 
    });
  }
}

async function checkExistingAnalysis(scheduleId, location) {
  try {
    const analysisRef = collection(db, 'location-analysis');
    let q;
    
    if (scheduleId) {
      q = query(analysisRef, where('scheduleId', '==', scheduleId));
    } else {
      q = query(analysisRef, where('location', '==', location));
    }
    
    const snapshot = await getDocs(q);
    
    if (!snapshot.empty) {
      const doc = snapshot.docs[0];
      return {
        id: doc.id,
        ...doc.data()
      };
    }
    
    return null;
  } catch (error) {
    console.error('κΈ°μ΅΄ λ¶„μ„ κ²°κ³Ό ν™•μΈ μ¤λ¥:', error);
    return null;
  }
}

async function analyzeLocationWithAI(location, activity) {
  // μ‹¤μ  AI API νΈμ¶ λ€μ‹  κ³ ν’μ§ ν•λ“μ½”λ”© λ°μ΄ν„° μ‚¬μ©
  const locationData = {
    'μ²΄μ¤ν‚¤ ν¬λ΅¬λ…Έν”„': {
      name: 'μ²΄μ¤ν‚¤ ν¬λ΅¬λ…Έν”„ (ΔeskΓ½ Krumlov)',
      address: 'ΔeskΓ½ Krumlov, 381 01, Czech Republic',
      description: `μ²΄μ¤ν‚¤ ν¬λ΅¬λ…Έν”„λ” μ²΄μ½” λ‚¨λ¶€ λ³΄ν—¤λ―Έμ•„ μ§€λ°©μ— μ„μΉν• μ¤‘μ„Έ λ„μ‹λ΅, μ λ„¤μ¤μ½” μ„Έκ³„λ¬Έν™”μ μ‚°μΌλ΅ μ§€μ •λ μ•„λ¦„λ‹¤μ΄ μ—­μ‚¬ λ„μ‹μ…λ‹λ‹¤. λΈ”νƒ€λ°” κ°•μ΄ λ„μ‹λ¥Ό κ°μ‹Έκ³  μλ” λ…νΉν• μ§€ν•κ³Ό 13μ„ΈκΈ°λ¶€ν„° μ΄μ–΄μ Έμ¨ κ³ λ”•, λ¥΄λ„¤μƒμ¤, λ°”λ΅ν¬ κ±΄μ¶•λ¬Όλ“¤μ΄ μ΅°ν™”λ¥Ό μ΄λ£¨μ–΄ λ§μΉ λ™ν™” μ† λ„μ‹ κ°™μ€ λ¶„μ„κΈ°λ¥Ό μ—°μ¶ν•©λ‹λ‹¤.

      λ„μ‹μ μ¤‘μ‹¬μ—λ” μ²΄μ¤ν‚¤ ν¬λ΅¬λ…Έν”„ μ„±μ΄ μ°λ μ„ μμΌλ©°, μ΄λ” μ²΄μ½”μ—μ„ ν”„λΌν• μ„± λ‹¤μμΌλ΅ ν° μ„±μ±„μ…λ‹λ‹¤. μ„± λ‚΄λ¶€μ λ°”λ΅ν¬ κ·Ήμ¥μ€ μ„Έκ³„μ—μ„ κ°€μ¥ μ λ³΄μ΅΄λ λ°”λ΅ν¬ κ·Ήμ¥ μ¤‘ ν•λ‚λ΅ μ†κΌ½νλ©°, 17μ„ΈκΈ°λ¶€ν„° μ‚¬μ©λμ–΄ μ¨ μ›λμ λ¬΄λ€ μ¥μΉμ™€ μμƒμ„ κ·Έλ€λ΅ λ³΄μ΅΄ν•κ³  μμµλ‹λ‹¤.`,
      highlights: [
        'π° μ²΄μ¤ν‚¤ ν¬λ΅¬λ…Έν”„ μ„± - μ²΄μ½” μ 2μ μ„±μ±„',
        'π­ λ°”λ΅ν¬ κ·Ήμ¥ - 17μ„ΈκΈ° μ›ν• λ³΄μ΅΄',
        'π‰ λΈ”νƒ€λ°” κ°• - λ„μ‹λ¥Ό κ°μ‹Έλ” μ•„λ¦„λ‹¤μ΄ κ°•',
        'π›οΈ μ„± μ„ΈμΈνΈ λΉ„ν¬μ¤ κµν - κ³ λ”• κ±΄μ¶•μ κ±Έμ‘',
        'π¨ μ—κ³¤ μ‹¤λ  λ―Έμ κ΄€ - μ λ… ν™”κ°€μ μ‘ν’ μ „μ‹',
        'πΊ μ²΄μ½” μ „ν†µ λ§¥μ£Ό - ν„μ§€ μ–‘μ΅°μ¥ λ°©λ¬Έ'
      ],
      transportation: {
        subway: 'μ§€ν•μ²  μ—†μ (μ‹κ³¨ λ„μ‹)',
        bus: 'ν”„λΌν•μ—μ„ 3μ‹κ°„ λ²„μ¤',
        train: 'ν”„λΌν•μ—μ„ 3μ‹κ°„ κΈ°μ°¨',
        car: 'ν”„λΌν•μ—μ„ 2.5μ‹κ°„ μλ™μ°¨'
      },
      hours: 'μ„±: 09:00-17:00 (4μ›”-10μ›”), 09:00-16:00 (11μ›”-3μ›”)',
      phone: '+420 380 704 721',
      website: 'www.ckrumlov.cz',
      admission: 'μ„± λ‚΄λ¶€: 150 CZK, μ „μ²΄ ν¨μ¤: 250 CZK',
      nearby: [
        { name: 'μ²΄μ¤ν‚¤ λ¶€λ°μ”λΉ„μ²΄', distance: '25km', type: 'π›οΈ λ„μ‹' },
        { name: 'νΈλΌμ‡ΌλΉ„μ²΄', distance: '15km', type: 'ποΈ λ§μ„' },
        { name: 'λ΅μ¦λ² λ¥΄ν¬ μ„±', distance: '30km', type: 'π° μ„±μ±„' }
      ],
      tips: [
        'π… μΌμ¶ μ‹κ°„μ— λ°©λ¬Έν•λ©΄ κ°€μ¥ μ•„λ¦„λ‹¤μ΄ μ‚¬μ§„μ„ μ°μ„ μ μμµλ‹λ‹¤',
        'π« μ„± ν¬μ–΄λ” μ‚¬μ „ μμ•½μ„ κ¶μ¥ν•©λ‹λ‹¤',
        'π½οΈ ν„μ§€ λ μ¤ν† λ‘μ—μ„ μ²΄μ½” μ „ν†µ μ”λ¦¬λ¥Ό λ§›λ³΄μ„Έμ”',
        'π¶β€β™€οΈ λ„μ‹ μ „μ²΄κ°€ μ‘μ•„μ„ κ±Έμ–΄μ„ λ¨λ“  κ³³μ„ λ‘λ¬λ³Ό μ μμµλ‹λ‹¤',
        'π“Έ λΈ”νƒ€λ°” κ°•μ—μ„ μΉ΄λ„λ¥Ό νƒ€λ©° λ„μ‹λ¥Ό κ°μƒν•΄λ³΄μ„Έμ”',
        'π›οΈ μκ³µμν’ κ°€κ²μ—μ„ κΈ°λ…ν’μ„ κµ¬λ§¤ν•μ„Έμ”'
      ],
      culturalSignificance: 'μ²΄μ¤ν‚¤ ν¬λ΅¬λ…Έν”„λ” μ¤‘μ„Έ μ λ½μ λ„μ‹ κ³„νκ³Ό κ±΄μ¶•μ„ λ³΄μ—¬μ£Όλ” λ›°μ–΄λ‚ μμ‹λ΅, 1992λ…„ μ λ„¤μ¤μ½” μ„Έκ³„λ¬Έν™”μ μ‚°μΌλ΅ λ“±λ΅λμ—μµλ‹λ‹¤. λ„μ‹μ μ—­μ‚¬μ  μ¤‘μ‹¬μ§€λ” 13μ„ΈκΈ°λ¶€ν„° 17μ„ΈκΈ°κΉμ§€μ κ±΄μ¶• λ°μ „ κ³Όμ •μ„ μ™„λ²½ν•κ² λ³΄μ΅΄ν•κ³  μμ–΄, μ¤‘μ„Έ λ„μ‹μ μ „ν•μ μΈ λ¨μµμ„ μ—Ώλ³Ό μ μμµλ‹λ‹¤.',
      educationalValue: 'μ΄ λ„μ‹λ” μ¤‘μ„Έ μ λ½μ λ„μ‹ κ³„ν, κ³ λ”• λ° λ¥΄λ„¤μƒμ¤ κ±΄μ¶•, κ·€μ΅± λ¬Έν™”, κ·Έλ¦¬κ³  λ³΄ν—¤λ―Έμ•„μ μ—­μ‚¬λ¥Ό μ΄ν•΄ν•λ” λ° λ§¤μ° μ¤‘μ”ν• κµμ΅μ  κ°€μΉλ¥Ό μ§€λ‹κ³  μμµλ‹λ‹¤. νΉν λ°”λ΅ν¬ κ·Ήμ¥μ€ 17μ„ΈκΈ° κ·€μ΅± λ¬Έν™”μ™€ μμ μ„ μ—°κµ¬ν•λ” λ° κ·€μ¤‘ν• μλ£λ¥Ό μ κ³µν•©λ‹λ‹¤.'
    },
    'ν”„λΌν• μ„±': {
      name: 'ν”„λΌν• μ„± (PraΕΎskΓ½ hrad)',
      address: 'HradΔany, 119 08 Praha 1, Czech Republic',
      description: `ν”„λΌν• μ„±μ€ μ²΄μ½”μ μƒμ§•μ μΈ μ„±μ±„λ΅, 9μ„ΈκΈ°λ¶€ν„° ν„μ¬κΉμ§€ μ²΄μ½”μ μ •μΉμ , μΆ…κµμ  μ¤‘μ‹¬μ§€ μ—­ν• μ„ ν•΄μ™”μµλ‹λ‹¤. μ„Έκ³„μ—μ„ κ°€μ¥ ν° κ³ λ€ μ„±μ±„ μ¤‘ ν•λ‚λ΅, λ‹¤μ–‘ν• κ±΄μ¶• μ–‘μ‹μ΄ νΌμ¬λμ–΄ μλ” λ…νΉν• κ±΄μ¶•λ¬Όμ…λ‹λ‹¤.

      μ„± λ‚΄λ¶€μ—λ” μ„± μ„ΈμΈνΈ λΉ„ν¬μ¤ λ€μ„±λ‹Ή, μ„± μ΅°μ§€ λ€μ„±λ‹Ή, κ³¨λ“  λ μΈ, λ΅μ–„ ν°λ¦¬μ¤ λ“± μλ§μ€ μ—­μ‚¬μ  κ±΄λ¬Όλ“¤μ΄ μμΌλ©°, κ°κ°μ΄ μ²΄μ½”μ μ—­μ‚¬μ™€ λ¬Έν™”λ¥Ό λ€ν‘ν•λ” μ¤‘μ”ν• μ μ‚°μ…λ‹λ‹¤. νΉν μ„± μ„ΈμΈνΈ λΉ„ν¬μ¤ λ€μ„±λ‹Ήμ€ κ³ λ”• κ±΄μ¶•μ κ±Έμ‘μΌλ΅, 600λ…„μ— κ±Έμ³ κ±΄μ„¤λ μ›…μ¥ν• κ±΄μ¶•λ¬Όμ…λ‹λ‹¤.`,
      highlights: [
        'β› μ„± μ„ΈμΈνΈ λΉ„ν¬μ¤ λ€μ„±λ‹Ή - κ³ λ”• κ±΄μ¶•μ κ±Έμ‘',
        'π° λ΅μ–„ ν°λ¦¬μ¤ - λ³΄ν—¤λ―Έμ•„ μ™•λ“¤μ κ±°μ£Όμ§€',
        'π›΅οΈ μ„± μ΅°μ§€ λ€μ„±λ‹Ή - λ΅λ§λ„¤μ¤ν¬ κ±΄μ¶•',
        'ποΈ κ³¨λ“  λ μΈ - μ¤‘μ„Έ μ¥μΈλ“¤μ κ±°μ£Όμ§€',
        'π­ μ¬λ“ λ΅μ–„ ν°λ¦¬μ¤ - μ—­μ‚¬μ  μνμ¥',
        'πΉ λ΅μ–„ κ°€λ“  - μ•„λ¦„λ‹¤μ΄ μ •μ›'
      ],
      transportation: {
        subway: 'μ§€ν•μ²  AνΈμ„  MalostranskΓ΅μ—­',
        bus: '22λ², 23λ² λ²„μ¤',
        tram: '22λ², 23λ² νΈλ¨'
      },
      hours: 'μ„±λ‚΄ κµ¬μ—­: 06:00-22:00, κ±΄λ¬Ό: 09:00-17:00',
      phone: '+420 224 373 368',
      website: 'www.hrad.cz',
      admission: 'μ„±λ‚΄ κµ¬μ—­ λ¬΄λ£, κ°λ³„ κ±΄λ¬Ό μ λ£',
      nearby: [
        { name: 'μΉ΄λ¥Όκµ', distance: '0.5km', type: 'π‰ λ‹¤λ¦¬' },
        { name: 'λ§λΌ μ¤νΈλΌλ‚', distance: '0.3km', type: 'π›οΈ μ§€μ—­' },
        { name: 'ννΈλ¦° νƒ€μ›', distance: '0.8km', type: 'π—Ό μ „λ§λ€' }
      ],
      tips: [
        'π… μΌμ¶ μ‹κ°„μ— λ°©λ¬Έν•λ©΄ ν”„λΌν• μ „μ²΄λ¥Ό μ΅°λ§ν•  μ μμµλ‹λ‹¤',
        'π« κ°λ³„ κ±΄λ¬Ό μ…μ¥κ¶μ„ κµ¬λ§¤ν•λ©΄ λ” μμ„Έν κ΄€λν•  μ μμµλ‹λ‹¤',
        'π“Έ μ„± μ •λ¬Έμ—μ„μ κµλ€μ‹μ„ λ†“μΉμ§€ λ§μ„Έμ”',
        'π· μ„± λ‚΄λ¶€ μΉ΄νμ—μ„ μ™€μΈμ„ λ§μ‹λ©° ν΄μ‹μ„ μ·¨ν•μ„Έμ”',
        'π­ μ„± λ‚΄λ¶€μ—μ„ μ—΄λ¦¬λ” ν΄λμ‹ μ½μ„νΈλ¥Ό κ°μƒν•΄λ³΄μ„Έμ”',
        'π›οΈ μ„± λ‚΄λ¶€ κΈ°λ…ν’ κ°€κ²μ—μ„ νΉλ³„ν• κΈ°λ…ν’μ„ κµ¬λ§¤ν•μ„Έμ”'
      ],
      culturalSignificance: 'ν”„λΌν• μ„±μ€ μ²΄μ½”μ μ •μΉμ , μΆ…κµμ , λ¬Έν™”μ  μ¤‘μ‹¬μ§€λ΅μ„ 1000λ…„ μ΄μƒμ μ—­μ‚¬λ¥Ό κ°€μ§€κ³  μμµλ‹λ‹¤. λ³΄ν—¤λ―Έμ•„ μ™•κµ­, μ‹ μ„±λ΅λ§μ κµ­, μ²΄μ½”μ¬λ΅λ°”ν‚¤μ•„, ν„μ¬μ μ²΄μ½” κ³µν™”κµ­κΉμ§€ λ¨λ“  μ‹λ€μ κ¶λ ¥ μ¤‘μ‹¬μ§€ μ—­ν• μ„ ν•΄μ™”μΌλ©°, μ²΄μ½”μ μ—­μ‚¬μ™€ λ¬Έν™”λ¥Ό μƒμ§•ν•λ” κ°€μ¥ μ¤‘μ”ν• κ±΄μ¶•λ¬Όμ…λ‹λ‹¤.',
      educationalValue: 'ν”„λΌν• μ„±μ€ μ¤‘μ„Έ μ λ½μ μ •μΉ κµ¬μ΅°, μΆ…κµ λ¬Έν™”, κ±΄μ¶• λ°μ „ κ³Όμ •μ„ μ΄ν•΄ν•λ” λ° λ§¤μ° μ¤‘μ”ν• κµμ΅μ  κ°€μΉλ¥Ό μ§€λ‹κ³  μμµλ‹λ‹¤. νΉν μ„± μ„ΈμΈνΈ λΉ„ν¬μ¤ λ€μ„±λ‹Ήμ κ±΄μ¶• κ³Όμ •μ€ κ³ λ”• κ±΄μ¶•μ λ°μ „μ‚¬λ¥Ό λ³΄μ—¬μ£Όλ” λ›°μ–΄λ‚ μ‚¬λ΅€μ…λ‹λ‹¤.'
    },
    'μΉ΄λ¥Όκµ': {
      name: 'μΉ΄λ¥Όκµ (KarlΕ―v most)',
      address: 'KarlΕ―v most, 110 00 Praha 1, Czech Republic',
      description: `μΉ΄λ¥Όκµλ” 1357λ…„ μΉ΄λ¥Ό 4μ„Έμ λ…λ ΉμΌλ΅ κ±΄μ„¤λ κ³ λ”• μ–‘μ‹μ λλ‹¤λ¦¬λ΅, ν”„λΌν•μ μƒμ§•μ μΈ λλ“λ§ν¬μ…λ‹λ‹¤. λΈ”νƒ€λ°” κ°•μ„ κ°€λ΅μ§€λ¥΄λ” μ΄ λ‹¤λ¦¬λ” ν”„λΌν• μ„±κ³Ό μ¬λ“νƒ€μ΄μ„ μ—°κ²°ν•λ” μ¤‘μ”ν• κµν†µλ΅μ΄μ κ΄€κ΄‘ λ…μ†μ…λ‹λ‹¤.

      λ‹¤λ¦¬ μ„μ—λ” 30κ°μ μ„±μΈ λ™μƒλ“¤μ΄ μ„Έμ›μ Έ μμΌλ©°, κ°κ°μ΄ μ²΄μ½”μ μ—­μ‚¬μ™€ μΆ…κµλ¥Ό μƒμ§•ν•©λ‹λ‹¤. νΉν μ„± μ”ν• λ„¤ν¬λ¬΄ν¬ λ™μƒμ€ κ°€μ¥ μ λ…ν• λ™μƒμΌλ΅, μ΄ λ™μƒμ— μ†μ„ λ€λ©΄ μ†μ›μ΄ μ΄λ£¨μ–΄μ§„λ‹¤λ” μ „μ„¤μ΄ μμµλ‹λ‹¤. λ‹¤λ¦¬ μ„μ—μ„λ” κ±°λ¦¬ μμ κ°€λ“¤μ κ³µμ—°κ³Ό νλ§¤μƒλ“¤μ ν™κΈ°μ°¬ λ¨μµμ„ λ³Ό μ μμµλ‹λ‹¤.`,
      highlights: [
        'π—Ώ μ„± μ”ν• λ„¤ν¬λ¬΄ν¬ λ™μƒ - μ†μ› μ„±μ·¨μ λ™μƒ',
        'π­ κ±°λ¦¬ μμ κ°€ κ³µμ—° - λ‹¤μ–‘ν• λ¬Έν™” κ³µμ—°',
        'π“Έ μ•„λ¦„λ‹¤μ΄ μ „λ§ - ν”„λΌν• μ„±κ³Ό μ¬λ“νƒ€μ΄ μ΅°λ§',
        'π… μΌμ¶/μΌλ° - κ°€μ¥ μ•„λ¦„λ‹¤μ΄ μ‹κ°„λ€',
        'π›οΈ κ³ λ”• κ±΄μ¶• - 14μ„ΈκΈ° κ±΄μ¶• κΈ°μ μ κ±Έμ‘',
        'π¨ μμ κ°€λ“¤μ μ‘ν’ - ν„μ§€ μμ κ°€λ“¤μ μ‘ν’ κ°μƒ'
      ],
      transportation: {
        subway: 'μ§€ν•μ²  AνΈμ„  StaromΔ›stskΓ΅μ—­',
        bus: '194λ², 207λ² λ²„μ¤',
        tram: '17λ², 18λ² νΈλ¨'
      },
      hours: '24μ‹κ°„ κ°λ°©',
      phone: '+420 236 002 629',
      website: 'www.prague.eu',
      admission: 'λ¬΄λ£',
      nearby: [
        { name: 'μ¬λ“νƒ€μ΄ μ¤ν€μ–΄', distance: '0.3km', type: 'π›οΈ κ΄‘μ¥' },
        { name: 'μ„± λ‹μ½λΌμ¤ κµν', distance: '0.2km', type: 'β› κµν' },
        { name: 'μ”ν• λ λ„μΈ  λ™μƒ', distance: '0.1km', type: 'π—Ώ λ™μƒ' }
      ],
      tips: [
        'π… μΌμ¶κ³Ό μΌλ° μ‹κ°„μ— κ°€μ¥ μ•„λ¦„λ‹¤μ΄ μ‚¬μ§„μ„ μ°μ„ μ μμµλ‹λ‹¤',
        'π¤ μ„± μ”ν• λ„¤ν¬λ¬΄ν¬ λ™μƒμ— μ†μ„ λ€κ³  μ†μ›μ„ λΉμ–΄λ³΄μ„Έμ”',
        'π­ κ±°λ¦¬ μμ κ°€λ“¤μ κ³µμ—°μ„ κ°μƒν•κ³  νμ„ μ£Όμ„Έμ”',
        'π“Έ λ‹¤λ¦¬ μ–‘μ½ λμ—μ„ ν”„λΌν• μ„±κ³Ό μ¬λ“νƒ€μ΄μ„ μ΅°λ§ν•μ„Έμ”',
        'π›οΈ λ‹¤λ¦¬ μ„μ—μ„ νλ§¤ν•λ” μκ³µμν’μ„ κµ¬λ§¤ν•μ„Έμ”',
        'πΊ λ‹¤λ¦¬ κ·Όμ² μΉ΄νμ—μ„ μ²΄μ½” λ§¥μ£Όλ¥Ό λ§μ‹λ©° ν΄μ‹μ„ μ·¨ν•μ„Έμ”'
      ],
      culturalSignificance: 'μΉ΄λ¥Όκµλ” μ²΄μ½”μ μ—­μ‚¬μ™€ λ¬Έν™”λ¥Ό μƒμ§•ν•λ” κ°€μ¥ μ¤‘μ”ν• κ±΄μ¶•λ¬Ό μ¤‘ ν•λ‚μ…λ‹λ‹¤. 600λ…„ μ΄μƒ ν”„λΌν•μ μ¤‘μ‹¬μ„ μ—°κ²°ν•΄μ¨ μ΄ λ‹¤λ¦¬λ” μ²΄μ½”μ μ •μΉμ , κ²½μ μ , λ¬Έν™”μ  λ°μ „μ„ λ©κ²©ν•΄μ™”μΌλ©°, ν„μ¬λ” ν”„λΌν•μ μƒμ§•μ΄μ μ„Έκ³„μ μΌλ΅ μ λ…ν• κ΄€κ΄‘ λ…μ†κ°€ λμ—μµλ‹λ‹¤.',
      educationalValue: 'μΉ΄λ¥Όκµλ” μ¤‘μ„Έ μ λ½μ κ±΄μ¶• κΈ°μ , λ„μ‹ κ³„ν, μΆ…κµ λ¬Έν™”λ¥Ό μ΄ν•΄ν•λ” λ° λ§¤μ° μ¤‘μ”ν• κµμ΅μ  κ°€μΉλ¥Ό μ§€λ‹κ³  μμµλ‹λ‹¤. νΉν κ³ λ”• κ±΄μ¶•μ νΉμ§•κ³Ό λ‹¤λ¦¬ κ±΄μ„¤ κΈ°μ μ λ°μ „ κ³Όμ •μ„ μ—°κµ¬ν•λ” λ° κ·€μ¤‘ν• μλ£λ¥Ό μ κ³µν•©λ‹λ‹¤.'
    },
    'ν”„λΌν• κµ­λ¦½λ°•λ¬Όκ΄€': {
      name: 'ν”„λΌν• κµ­λ¦½λ°•λ¬Όκ΄€ (NΓ΅rodnΓ­ muzeum)',
      address: 'VΓ΅clavskΓ© nΓ΅m. 68, 110 00 Praha 1, Czech Republic',
      description: `ν”„λΌν• κµ­λ¦½λ°•λ¬Όκ΄€μ€ μ²΄μ½”μ μ—­μ‚¬, μμ—°μ‚¬, λ¬Έν™”λ¥Ό μ „μ‹ν•λ” κµ­λ¦½ λ°•λ¬Όκ΄€μΌλ΅, 1818λ…„μ— μ„¤λ¦½λ μ²΄μ½” μµκ³ μ λ°•λ¬Όκ΄€μ…λ‹λ‹¤. λ‰΄λ¥΄λ„¤μƒμ¤ μ–‘μ‹μ μ›…μ¥ν• κ±΄λ¬Όμ€ λ°”μΈ¨λΌν”„ κ΄‘μ¥μ λ¶μ½ λμ— μ„μΉν•λ©°, ν”„λΌν•μ μƒμ§•μ μΈ κ±΄μ¶•λ¬Ό μ¤‘ ν•λ‚μ…λ‹λ‹¤.

      λ°•λ¬Όκ΄€ λ‚΄λ¶€μ—λ” μ²΄μ½”μ μ„ μ‚¬μ‹λ€λ¶€ν„° ν„λ€κΉμ§€μ μ—­μ‚¬μ  μ λ¬Ό, μμ—°μ‚¬ ν‘λ³Έ, λ―Όμ†ν•™ μλ£ λ“±μ΄ μ²΄κ³„μ μΌλ΅ μ „μ‹λμ–΄ μμµλ‹λ‹¤. νΉν λ³΄ν—¤λ―Έμ•„μ μ—­μ‚¬μ™€ λ¬Έν™”λ¥Ό μ΄ν•΄ν•λ” λ° λ§¤μ° μ¤‘μ”ν• μλ£λ“¤μ„ λ³΄κ΄€ν•κ³  μμΌλ©°, μ²΄μ½”μ λ¬Έν™”μ  μ •μ²΄μ„±μ„ λ³΄μ—¬μ£Όλ” ν•µμ‹¬ κΈ°κ΄€μ…λ‹λ‹¤.`,
      highlights: [
        'π›οΈ λ‰΄λ¥΄λ„¤μƒμ¤ κ±΄μ¶• - 19μ„ΈκΈ° κ±΄μ¶•μ κ±Έμ‘',
        'π“ μ—­μ‚¬ μ „μ‹κ΄€ - μ²΄μ½” μ—­μ‚¬μ λ¨λ“  μ‹λ€',
        'π¦• μμ—°μ‚¬ μ „μ‹κ΄€ - ν™”μ„κ³Ό λ™λ¬Ό ν‘λ³Έ',
        'π’ λ³΄μ„ μ „μ‹κ΄€ - λ³΄ν—¤λ―Έμ•„ ν¬λ¦¬μ¤νƒ',
        'π­ λ―Όμ†ν•™ μ „μ‹κ΄€ - μ²΄μ½” μ „ν†µ λ¬Έν™”',
        'π“– λ„μ„κ΄€ - μ—­μ‚¬μ  λ¬Έν— λ³΄κ΄€'
      ],
      transportation: {
        subway: 'μ§€ν•μ²  AνΈμ„  Muzeumμ—­',
        bus: '505λ², 511λ² λ²„μ¤',
        tram: '11λ², 13λ² νΈλ¨'
      },
      hours: '10:00-18:00 (ν™”-μΌ), μ›”μ”μΌ ν΄κ΄€',
      phone: '+420 224 497 111',
      website: 'www.nm.cz',
      admission: 'μ„±μΈ 200 CZK, ν•™μƒ 130 CZK',
      nearby: [
        { name: 'λ°”μΈ¨λΌν”„ κ΄‘μ¥', distance: '0.1km', type: 'π›οΈ κ΄‘μ¥' },
        { name: 'κµ­λ¦½κ·Ήμ¥', distance: '0.5km', type: 'π­ κ·Ήμ¥' },
        { name: 'λ£¨λν”Όλ”', distance: '0.3km', type: 'π¨ λ―Έμ κ΄€' }
      ],
      tips: [
        'π« μ¨λΌμΈμΌλ΅ ν‹°μΌ“μ„ λ―Έλ¦¬ κµ¬λ§¤ν•λ©΄ μ¤„μ„ μ„μ§€ μ•μ•„λ„ λ©λ‹λ‹¤',
        'π“Έ κ±΄λ¬Ό μ™Έλ¶€μ μ›…μ¥ν• κ±΄μ¶•μ„ λ¨Όμ € κ°μƒν•μ„Έμ”',
        'π• μµμ† 2-3μ‹κ°„μ„ ν• μ• ν•΄μ„ μ²μ²ν κ΄€λν•μ„Έμ”',
        'π§ μ¤λ””μ¤ κ°€μ΄λ“λ¥Ό λ€μ—¬ν•λ©΄ λ” μμ„Έν• μ„¤λ…μ„ λ“¤μ„ μ μμµλ‹λ‹¤',
        'π“ λ„μ„κ΄€λ„ λ°©λ¬Έν•΄μ„ μ—­μ‚¬μ  λ¬Έν—μ„ μ‚΄ν΄λ³΄μ„Έμ”',
        'β• λ°•λ¬Όκ΄€ μΉ΄νμ—μ„ ν΄μ‹μ„ μ·¨ν•λ©° κ΄€λμ„ λ§λ¬΄λ¦¬ν•μ„Έμ”'
      ],
      culturalSignificance: 'ν”„λΌν• κµ­λ¦½λ°•λ¬Όκ΄€μ€ μ²΄μ½”μ λ¬Έν™”μ  μ •μ²΄μ„±κ³Ό μ—­μ‚¬μ  μλ¶€μ‹¬μ„ λ€ν‘ν•λ” κ°€μ¥ μ¤‘μ”ν• λ¬Έν™” κΈ°κ΄€μ…λ‹λ‹¤. 200λ…„ μ΄μƒ μ²΄μ½”μ μ—­μ‚¬μ™€ λ¬Έν™”λ¥Ό λ³΄μ΅΄ν•κ³  μ „μ‹ν•΄μ™”μΌλ©°, μ²΄μ½” κµ­λ―Όλ“¤μ—κ² μμ‹ λ“¤μ λΏλ¦¬μ™€ λ¬Έν™”μ  μ μ‚°μ„ μ•λ¦¬λ” κµμ΅μ  μ—­ν• μ„ μν–‰ν•κ³  μμµλ‹λ‹¤.',
      educationalValue: 'μ΄ λ°•λ¬Όκ΄€μ€ μ²΄μ½”μ μ—­μ‚¬, λ¬Έν™”, μμ—°μ‚¬λ¥Ό μ²΄κ³„μ μΌλ΅ ν•™μµν•  μ μλ” μµκ³ μ κµμ΅ κΈ°κ΄€μ…λ‹λ‹¤. νΉν λ³΄ν—¤λ―Έμ•„μ μ—­μ‚¬μ™€ μ¤‘λ¶€ μ λ½μ λ¬Έν™” λ°μ „ κ³Όμ •μ„ μ΄ν•΄ν•λ” λ° λ§¤μ° μ¤‘μ”ν• μλ£λ“¤μ„ μ κ³µν•©λ‹λ‹¤.'
    }
  };

  // μ¥μ†λ… λ§¤μΉ­ (λ¶€λ¶„ μΌμΉλ„ ν—μ©)
  const matchedLocation = Object.keys(locationData).find(key => 
    location.toLowerCase().includes(key.toLowerCase()) ||
    key.toLowerCase().includes(location.toLowerCase())
  );

  if (matchedLocation) {
    return locationData[matchedLocation];
  }

  // λ§¤μΉ­λμ§€ μ•λ” κ²½μ° κΈ°λ³Έ μ •λ³΄ μƒμ„±
  return {
    name: location,
    address: 'μ£Όμ† μ •λ³΄ μ—†μ',
    description: `${location}μ€(λ”) μ—°μ ν™λ™μ— μ ν•©ν• μ¥μ†μ…λ‹λ‹¤. μ΄κ³³μ—μ„ λ‹¤μ–‘ν• κµμ΅μ  κ²½ν—μ„ μ“μ„ μ μμΌλ©°, ν„μ§€ λ¬Έν™”μ™€ μ—­μ‚¬λ¥Ό μ§μ ‘ μ²΄ν—ν•  μ μλ” μΆ‹μ€ κΈ°νκ°€ λ  κ²ƒμ…λ‹λ‹¤.`,
    highlights: [
      'π›οΈ ν„μ§€ λ¬Έν™” μ²΄ν—',
      'π“ κµμ΅μ  κ°€μΉ',
      'π κµ­μ μ  κ²½ν—',
      'π¤ λ¬Έν™” κµλ¥'
    ],
    transportation: {
      subway: 'κµν†µ μ •λ³΄ μ—†μ',
      bus: 'λ²„μ¤ μ •λ³΄ μ—†μ',
      tram: 'νΈλ¨ μ •λ³΄ μ—†μ'
    },
    hours: 'μ΄μμ‹κ°„ μ •λ³΄ μ—†μ',
    phone: 'μ—°λ½μ² μ •λ³΄ μ—†μ',
    website: 'μ›Ήμ‚¬μ΄νΈ μ •λ³΄ μ—†μ',
    admission: 'μ…μ¥λ£ μ •λ³΄ μ—†μ',
    nearby: [],
    tips: [
      'ν„μ§€ κ°€μ΄λ“μ™€ ν•¨κ» λ°©λ¬Έν•λ©΄ λ” μμ„Έν• μ •λ³΄λ¥Ό μ–»μ„ μ μμµλ‹λ‹¤',
      'μ‚¬μ „μ— μ¥μ†μ— λ€ν• μ •λ³΄λ¥Ό μμ§‘ν•΄λ‘μ„Έμ”',
      'ν„μ§€ λ¬Έν™”μ™€ κ΄€μµμ„ μ΅΄μ¤‘ν•λ©° λ°©λ¬Έν•μ„Έμ”'
    ],
    culturalSignificance: 'μ΄ μ¥μ†λ” ν„μ§€ λ¬Έν™”μ™€ μ—­μ‚¬λ¥Ό μ΄ν•΄ν•λ” λ° μ¤‘μ”ν• μλ―Έλ¥Ό μ§€λ‹κ³  μμµλ‹λ‹¤.',
    educationalValue: 'μ—°μ ν™λ™μ„ ν†µν•΄ μ‹¤λ¬΄ κ²½ν—κ³Ό λ¬Έν™”μ  μ΄ν•΄λ¥Ό λ™μ‹μ— μ–»μ„ μ μλ” κµμ΅μ  κ°€μΉκ°€ λ†’μ€ μ¥μ†μ…λ‹λ‹¤.'
  };
}

